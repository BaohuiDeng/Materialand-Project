{"ast":null,"code":"import _classCallCheck from \"/Users/baohuideng/Desktop/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/baohuideng/Desktop/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/baohuideng/Desktop/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/baohuideng/Desktop/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/baohuideng/Desktop/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/baohuideng/Desktop/testdeployUDE-final/client/src/components/ProfileNormal.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport jwt_decode from 'jwt-decode';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport axios from 'axios';\nimport { UrlContext } from '../contexts/urlContext';\n\nvar ProfileNormal = /*#__PURE__*/function (_Component) {\n  _inherits(ProfileNormal, _Component);\n\n  function ProfileNormal(props) {\n    var _this;\n\n    _classCallCheck(this, ProfileNormal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfileNormal).call(this, props));\n\n    _this.handleFile = function (e) {\n      var newFile = e.target.files[0];\n\n      _this.setState({\n        file: newFile\n      }, function (e) {\n        return _this.getImage(_this.state.file.name);\n      });\n    };\n\n    _this.state = {\n      username: '',\n      email: '',\n      image: decoded.identity.file,\n      secondimage: '',\n      Open: false,\n      msg: '',\n      file: '',\n      uri: '',\n      serverUrl: UrlContext._currentValue,\n      result: \"\",\n      resToken: \"\",\n      mounted: false\n    };\n    return _this;\n  }\n\n  _createClass(ProfileNormal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        username: decoded.identity.username,\n        email: decoded.identity.email,\n        file: decoded.identity.file\n      }, function () {\n        return _this2.getImage(_this2.state.file);\n      }, console.log(this.state.file));\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(file) {\n      if (this.state.file !== 'images/userProfile.png') {\n        this.setState({\n          image: this.state.serverUrl + 'file/' + file\n        });\n      } else {\n        this.setState({\n          image: this.state.image\n        });\n      }\n    }\n  }, {\n    key: \"imageUpload\",\n    value: function imageUpload(e, file) {\n      var _this3 = this;\n\n      var email = this.state.email; // let  file = this.state.file\n\n      console.log(file);\n      var formdata = new FormData();\n      formdata.append('file', file);\n      formdata.append('email', email);\n      axios({\n        url: this.state.serverUrl + 'profileUpload',\n        method: 'POST',\n        headers: {\n          authorization: 'usertoken'\n        },\n        data: formdata\n      }).then(function (response) {\n        _this3.setState({// \"result\":response.data.msg,\n          // \"mounted\":true,\n        }); //  this.logOut(e)                       \n\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-8 mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, this.state.username)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"font-weight-bold text-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, this.state.msg), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-8 mx-auto\",\n        style: {\n          \"display\": \"flex\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.image,\n        style: {\n          \"width\": '40%',\n          \"height\": 'auto',\n          \"border\": 'solid 1px lightgrey',\n          \"borderRadius\": \"25%\"\n        },\n        title: this.state.username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 16\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table col-md-6 mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 29\n        }\n      }, \"Username\"), /*#__PURE__*/React.createElement(\"td\", {\n        onChange: this.change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 29\n        }\n      }, this.state.username, \" \")), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(\"td\", {\n        onChange: this.change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, this.state.email, \" \")), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"btn btn-primary mt-2\",\n        size: \"lg\",\n        onClick: this.props.clickMe,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 33\n        }\n      }, \"update\")))))));\n    }\n  }]);\n\n  return ProfileNormal;\n}(Component);\n\nexport { ProfileNormal as default };","map":{"version":3,"sources":["/Users/baohuideng/Desktop/testdeployUDE-final/client/src/components/ProfileNormal.js"],"names":["React","Component","Button","Form","FormGroup","Label","Input","FormText","jwt_decode","Modal","ModalHeader","ModalBody","ModalFooter","axios","UrlContext","ProfileNormal","props","handleFile","e","newFile","target","files","setState","file","getImage","state","name","username","email","image","decoded","identity","secondimage","Open","msg","uri","serverUrl","_currentValue","result","resToken","mounted","token","localStorage","usertoken","console","log","formdata","FormData","append","url","method","headers","authorization","data","then","response","change","clickMe"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport jwt_decode from 'jwt-decode';\nimport {Modal, ModalHeader,ModalBody,ModalFooter } from 'reactstrap';\nimport axios from 'axios';\nimport { UrlContext } from '../contexts/urlContext';\n\n\nexport default class ProfileNormal extends Component{\n    constructor(props) {\n    \n        super(props)\n        this.state = {\n            username:'',\n            email:'',\n            image:decoded.identity.file,\n            secondimage:'',\n            Open:false,\n            msg:'',\n            file:'',\n            uri:'',\n            serverUrl: UrlContext._currentValue,\n            result:\"\",\n            resToken:\"\",\n            mounted:false,\n        }\n    }\n    componentDidMount () {\n        const token = localStorage.usertoken\n        const decoded = jwt_decode(token)\n        this.setState({\n            username: decoded.identity.username,\n            email: decoded.identity.email,\n            file:decoded.identity.file\n        },()=>this.getImage(this.state.file), console.log(this.state.file))\n        \n    }\n    getImage(file){\n        if(this.state.file!=='images/userProfile.png'){\n            this.setState({\n                image: this.state.serverUrl +'file/'+ file\n            })\n         }\n         else{\n            this.setState({\n                image: this.state.image\n            })\n         }\n    }\n    handleFile = (e) => {\n        const newFile =e.target.files[0]\n        this.setState({\n            file:newFile,\n        },(e)=>this.getImage(this.state.file.name));\n    }\n    imageUpload(e,file){\n        let email = this.state.email\n        // let  file = this.state.file\n        console.log(file)\n        let formdata = new FormData()\n        formdata.append('file',file)\n        formdata.append('email',email)\n        axios({\n            url: this.state.serverUrl +'profileUpload',\n            method: 'POST',\n            headers:{\n                authorization:'usertoken'\n            },\n            data:formdata\n\n        }).then(response => {\n            \n            this.setState({\n                // \"result\":response.data.msg,\n                // \"mounted\":true,\n            })\n            //  this.logOut(e)                       \n        })\n    }\n   \n    render() {\n        return (\n            <div>\n                <div className=\"col-sm-8 mx-auto\">\n                    <h2 className=\"text-center\">{this.state.username}</h2>\n                </div>\n                <div className=\"font-weight-bold text-success\">{this.state.msg}</div>\n                <div className=\"col-sm-8 mx-auto\" style={{\"display\":\"flex\", \"justifyContent\": \"center\", \"alignItems\": \"center\"}}>\n                    <img src={this.state.image} style={{ \"width\":'40%',\"height\":'auto', \"border\":'solid 1px lightgrey', \"borderRadius\": \"25%\"}} title={this.state.username}/> \n                </div>  \n               <br></br>\n               <div className=\"\">\n                    <table className=\"table col-md-6 mx-auto\">\n                        <tbody>\n                        <tr>\n                            <td>Username</td>\n                            <td onChange={this.change}>{this.state.username} </td>\n                        </tr>\n                        <tr>\n                            <td>Email</td>\n                            <td onChange={this.change}>{this.state.email} </td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>\n                                <Button className=\"btn btn-primary mt-2\" size=\"lg\" onClick={this.props.clickMe}>update</Button>\n                            </td>\n                            </tr>\n                            </tbody>\n                    </table>\n               </div>\n            </div>\n        )\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}