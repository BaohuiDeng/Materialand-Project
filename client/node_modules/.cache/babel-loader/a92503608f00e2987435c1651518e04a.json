{"ast":null,"code":"import _defineProperty from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/baohuideng/Downloads/testdeployUDE-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/baohuideng/Downloads/testdeployUDE-final/client/src/components/Post.js\";\nimport React, { Component } from 'react';\nimport { Input } from 'reactstrap';\nimport Footer from './Footer';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport { UrlContext } from '../contexts/urlContext';\n\nvar Post = /*#__PURE__*/function (_Component) {\n  _inherits(Post, _Component);\n\n  function Post() {\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Post).call(this));\n\n    _this.handleFile = function (e) {\n      //let handlefile = e.target.files[0];\n      var file = e.target.files[0];\n\n      _this.setState({\n        file: file\n      });\n    };\n\n    _this.getAllPost = function () {\n      axios.get(_this.state.serverUrl + 'users/posts').then(function (response) {\n        var data = response.data;\n\n        _this.setState({\n          posts: data\n        });\n\n        console.log('Data has been received!');\n      }).catch(function () {\n        alert('Error retrieving data!!');\n      });\n    };\n\n    _this.state = {\n      email: '',\n      title: '',\n      content: '',\n      category: '',\n      file: 'null',\n      'serverUrl': UrlContext._currentValue\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDropdownChange = _this.handleDropdownChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        email: decoded.identity.email\n      });\n    }\n  }, {\n    key: \"handleDropdownChange\",\n    value: function handleDropdownChange(e) {\n      this.setState({\n        category: e.target.value\n      });\n    }\n  }, {\n    key: \"handleUpload\",\n    value: function handleUpload(e) {\n      var _this2 = this;\n\n      console.log(this.state, \"The state --- $$$$\");\n      var file = this.state.file;\n      var title = this.state.title;\n      var content = this.state.content;\n      var category = this.state.category;\n      var email = this.state.email;\n      var formdata = new FormData();\n      formdata.append('file', file);\n      formdata.append('title', title);\n      formdata.append('content', content);\n      formdata.append('category', category);\n      formdata.append('email', email);\n      axios({\n        url: this.state.serverUrl + 'users/post',\n        method: 'POST',\n        headers: {\n          authorization: 'usertoken'\n        },\n        data: formdata\n      }).then(function (response) {\n        _this2.getAllPost();\n\n        _this2.props.history.push('/allpost');\n\n        console.log(\"Added new post!\");\n        window.location = '/allpost';\n      });\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      e.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row w-100 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-7 px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: 'images/newpost.jpg',\n        style: {\n          width: '100%'\n        },\n        alt: \"newpost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-5 my-5  px-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \" my-4 font-weight-normal\",\n        style: {\n          color: '#5c7d92',\n          paddingLeft: '40%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }\n      }, \"New Post\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }\n      }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"title\",\n        className: \"form-control\",\n        name: \"title\",\n        placeholder: \"Title of your post\",\n        value: this.state.title,\n        onChange: this.onChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }\n      }, \"Category\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"category\",\n        id: \"category\",\n        onChange: function onChange(e) {\n          _this3.setState({\n            category: e.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        selected: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }\n      }, \"Choose Category\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Peer to Peer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }\n      }, \"Peer to Peer\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Advance Web Technology\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 29\n        }\n      }, \"Advance Web Technology\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Internet of Things\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }\n      }, \"Internet of Things\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 29\n        }\n      }, \"Content \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"content\",\n        className: \"form-control\",\n        style: {\n          height: \"120px\"\n        },\n        name: \"content\",\n        placeholder: \"Extra Explaination...\",\n        value: this.state.content,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        style: {\n          color: '#5c7d92',\n          marginRight: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 27\n        }\n      }, \" Select File\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"mb-2 \",\n        type: \"file\",\n        name: \"file\",\n        accept: \"image/png, image/jpeg, .zip,.rar,.7zip, .pdf\",\n        onChange: function onChange(e) {\n          return _this3.handleFile(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: '#E67E22'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }, \"Supported Formats: JPG-PNG-PDF-Zip\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: function onClick(e) {\n          return _this3.handleUpload(e);\n        },\n        className: \"btn btn-md btn-primary btn-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      }, \"Post\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 14\n        }\n      })));\n    }\n  }]);\n\n  return Post;\n}(Component);\n\nexport { Post as default };","map":{"version":3,"sources":["/Users/baohuideng/Downloads/testdeployUDE-final/client/src/components/Post.js"],"names":["React","Component","Input","Footer","axios","jwt_decode","UrlContext","Post","handleFile","e","file","target","files","setState","getAllPost","get","state","serverUrl","then","response","data","posts","console","log","catch","alert","email","title","content","category","_currentValue","onChange","bind","onSubmit","handleDropdownChange","token","localStorage","usertoken","decoded","identity","value","formdata","FormData","append","url","method","headers","authorization","props","history","push","window","location","name","preventDefault","width","color","paddingLeft","height","marginRight","handleUpload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {  Input } from 'reactstrap';\nimport Footer from './Footer';\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode';\nimport { UrlContext } from '../contexts/urlContext';\n\n\n\n\nexport default class Post extends Component {\n    constructor() {\n        super()\n        this.state = {\n            email:'',\n            title: '',\n            content: '',\n            category:'',\n            file:'null',\n            'serverUrl': UrlContext._currentValue,\n        }\n\n        this.onChange = this.onChange.bind(this)\n        this.onSubmit = this.onSubmit.bind(this)\n        this.handleDropdownChange=this.handleDropdownChange.bind(this)\n    }\n    componentDidMount () {\n        const token = localStorage.usertoken\n        const decoded = jwt_decode(token)\n        this.setState({\n            email: decoded.identity.email\n        })\n    }\n    handleDropdownChange(e){\n        this.setState({category:e.target.value})\n    }\n\n\n    handleFile = (e) => {\n        //let handlefile = e.target.files[0];\n        let file =e.target.files[0]\n        this.setState({file:file})\n\n\n    }\n    getAllPost = () => {\n        axios.get(this.state.serverUrl +'users/posts')\n        .then((response) => {\n          const data = response.data;\n          this.setState({posts:data})\n          console.log('Data has been received!');\n        })\n        .catch(()=>{\n          alert('Error retrieving data!!');\n      });\n    }\n\n\n    handleUpload(e){\n        console.log(this.state,\"The state --- $$$$\")\n        let file = this.state.file\n        let title = this.state.title\n        let content = this.state.content\n        let category = this.state.category\n        let email = this.state.email\n        let formdata = new FormData()\n\n        formdata.append('file',file)\n        formdata.append('title',title)\n        formdata.append('content',content)\n        formdata.append('category',category)\n        formdata.append('email',email)\n\n   axios({\n            url: this.state.serverUrl +'users/post',\n            method: 'POST',\n            headers:{\n                authorization:'usertoken'\n            },\n            data:formdata\n              \n        }).then(response => {\n            this.getAllPost()\n            this.props.history.push('/allpost')\n            console.log(\"Added new post!\")\n            window.location='/allpost'\n        })\n\n\n    }\n\n    onChange (e) {\n        this.setState({ [e.target.name]: e.target.value })\n    }\n    onSubmit (e) {\n        e.preventDefault()\n     \n        \n    }\n  \n\n\n\n    render() {\n        return (\n            <React.Fragment>\n\n            <div className=\"container-fluid\">\n\n\n\n                {/* <div className=\"row mt-5 jumbotron \"> */}\n                <div className=\"row w-100 \">\n                    <div className=\"col-md-7 px-0\">\n                    <img src={'images/newpost.jpg'} style={{width:'100%'}} alt=\"newpost\" />\n\n                    </div>\n                    <div className=\"col-md-5 my-5  px-5\" >\n                    <form noValidate onSubmit={this.onSubmit}>\n                    <h4 className=\" my-4 font-weight-normal\" style={{color: '#5c7d92', paddingLeft:'40%'}}>New Post</h4>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"title\">Title</label>\n                            <input type=\"title\"\n                                className=\"form-control\"\n                                name=\"title\"\n                                placeholder=\"Title of your post\"\n                                value={this.state.title}\n                                onChange={this.onChange} required/>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"category\">Category</label>\n                            <Input type=\"select\" name=\"category\" id=\"category\" onChange={e=>{this.setState({category:e.target.value})}}>\n                            <option value=\"\" disabled selected>Choose Category</option>\n                            <option value=\"Peer to Peer\">Peer to Peer</option>\n                            <option value=\"Advance Web Technology\">Advance Web Technology</option>\n                            <option value=\"Internet of Things\">Internet of Things</option>\n                            </Input>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"content\">Content </label>\n                            <input type=\"content\"\n                                className=\"form-control\" style={{height:\"120px\"}}\n                                name=\"content\"\n                                placeholder=\"Extra Explaination...\"\n                                value={this.state.content}\n                                onChange={this.onChange} />\n                        </div>\n                        \n                      <div className=\"\">\n                          <label style={{color: '#5c7d92', marginRight:'2%'}}> Select File</label>\n                          <input className=\"mb-2 \"type=\"file\" name=\"file\"\n                          accept=\"image/png, image/jpeg, .zip,.rar,.7zip, .pdf\"\n                          onChange={(e)=>this.handleFile(e)} />\n                          </div>\n                        \n                        <p style={{color: '#E67E22'}} >\n                            Supported Formats: JPG-PNG-PDF-Zip\n                        </p>\n\n                        <button type=\"submit\" onClick={(e)=>this.handleUpload(e)} className=\"btn btn-md btn-primary btn-block\">\n                            Post\n                        </button>\n                    </form>\n                </div>\n            </div>\n          \n            </div>\n            <div className='container-fluid mt-5'> \n             <Footer />\n             </div>\n            </React.Fragment>\n\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}