{"ast":null,"code":"import _defineProperty from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/baohuideng/Desktop/MaterialLand/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/baohuideng/Desktop/MaterialLand/client/src/components/Post.js\";\nimport React, { Component } from 'react';\nimport { Input } from 'reactstrap';\nimport Footer from './Footer';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport { UrlContext } from '../contexts/urlContext';\n\nvar Post = /*#__PURE__*/function (_Component) {\n  _inherits(Post, _Component);\n\n  function Post() {\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Post).call(this));\n\n    _this.handleFile = function (e) {\n      var file = e.target.files[0];\n\n      _this.setState({\n        file: file\n      });\n    };\n\n    _this.state = {\n      email: '',\n      title: '',\n      content: '',\n      category: '',\n      file: 'null',\n      'serverUrl': UrlContext._currentValue\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        email: decoded.identity.email\n      });\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var file = this.state.file;\n      var title = this.state.title;\n      var content = this.state.content;\n      var category = this.state.category;\n      var email = this.state.email;\n      var formdata = new FormData();\n      formdata.append('file', file);\n      formdata.append('title', title);\n      formdata.append('content', content);\n      formdata.append('category', category);\n      formdata.append('email', email);\n      axios({\n        url: this.state.serverUrl + 'users/post',\n        method: 'POST',\n        headers: {\n          authorization: 'usertoken'\n        },\n        data: formdata\n      }).then(function (response) {\n        _this2.props.history.push('/allpost');\n\n        console.log(\"Added new post!\");\n        window.location = '/allpost';\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row w-100 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-7 px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: 'images/newpost.jpg',\n        style: {\n          width: '100%'\n        },\n        alt: \"newpost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-5 my-5  px-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \" my-4 font-weight-normal\",\n        style: {\n          color: '#5c7d92',\n          paddingLeft: '40%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }, \"New Post\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"title\",\n        className: \"form-control\",\n        name: \"title\",\n        placeholder: \"Title of your post\",\n        value: this.state.title,\n        onChange: this.onChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }\n      }, \"Category\"), /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"category\",\n        id: \"category\",\n        onChange: function onChange(e) {\n          _this3.setState({\n            category: e.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        selected: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }\n      }, \"Choose Category\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Peer to Peer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }\n      }, \"Peer to Peer\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Advance Web Technology\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }\n      }, \"Advance Web Technology\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Internet of Things\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }\n      }, \"Internet of Things\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }\n      }, \"Content \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"content\",\n        className: \"form-control\",\n        style: {\n          height: \"120px\"\n        },\n        name: \"content\",\n        placeholder: \"Extra Explaination...\",\n        value: this.state.content,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        style: {\n          color: '#5c7d92',\n          marginRight: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 27\n        }\n      }, \" Select File\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"mb-2 \",\n        type: \"file\",\n        name: \"file\",\n        accept: \"image/png, image/jpeg, .zip,.rar,.7zip, .pdf\",\n        onChange: function onChange(e) {\n          return _this3.handleFile(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: '#E67E22'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }, \"Supported Formats: JPG-PNG-PDF-Zip\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-md btn-primary btn-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }\n      }, \"Post\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 14\n        }\n      })));\n    }\n  }]);\n\n  return Post;\n}(Component);\n\nexport { Post as default };","map":{"version":3,"sources":["/Users/baohuideng/Desktop/MaterialLand/client/src/components/Post.js"],"names":["React","Component","Input","Footer","axios","jwt_decode","UrlContext","Post","handleFile","e","file","target","files","setState","state","email","title","content","category","_currentValue","onChange","bind","onSubmit","token","localStorage","usertoken","decoded","identity","name","value","preventDefault","formdata","FormData","append","url","serverUrl","method","headers","authorization","data","then","response","props","history","push","console","log","window","location","width","color","paddingLeft","height","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {  Input } from 'reactstrap';\nimport Footer from './Footer';\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode';\nimport { UrlContext } from '../contexts/urlContext';\n\nexport default class Post extends Component {\n    constructor() {\n        super()\n        this.state = {\n            email:'',\n            title: '',\n            content: '',\n            category:'',\n            file:'null',\n            'serverUrl': UrlContext._currentValue,\n        }\n\n        this.onChange = this.onChange.bind(this)\n        this.onSubmit = this.onSubmit.bind(this)\n    }\n    componentDidMount () {\n        const token = localStorage.usertoken\n        const decoded = jwt_decode(token)\n        this.setState({\n            email: decoded.identity.email\n        })\n    }\n    handleFile = (e) => {\n        let file = e.target.files[0]\n        this.setState({file:file})\n    }\n  \n    onChange (e) {\n        this.setState({ [e.target.name]: e.target.value })\n    }\n    onSubmit (e) {\n        e.preventDefault()\n        let file = this.state.file\n        let title = this.state.title\n        let content = this.state.content\n        let category = this.state.category\n        let email = this.state.email\n        let formdata = new FormData()\n        formdata.append('file',file)\n        formdata.append('title',title)\n        formdata.append('content',content)\n        formdata.append('category',category)\n        formdata.append('email',email)\n       axios({\n                url: this.state.serverUrl +'users/post',\n                method: 'POST',\n                headers:{\n                    authorization:'usertoken'\n                },\n                data:formdata\n            }).then(response => {\n                this.props.history.push('/allpost')\n                console.log(\"Added new post!\")\n                window.location='/allpost'\n            })\n    }\n    render() {\n        return (\n            <React.Fragment>\n            <div className=\"container-fluid\">\n                <div className=\"row w-100 \">\n                    <div className=\"col-md-7 px-0\">\n                    <img src={'images/newpost.jpg'} style={{width:'100%'}} alt=\"newpost\" />\n                    </div>\n                    <div className=\"col-md-5 my-5  px-5\" >\n                    <form noValidate onSubmit={this.onSubmit}>\n                    <h4 className=\" my-4 font-weight-normal\" style={{color: '#5c7d92', paddingLeft:'40%'}}>New Post</h4>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"title\">Title</label>\n                            <input type=\"title\"\n                                className=\"form-control\"\n                                name=\"title\"\n                                placeholder=\"Title of your post\"\n                                value={this.state.title}\n                                onChange={this.onChange} required/>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"category\">Category</label>\n                            <Input type=\"select\" name=\"category\" id=\"category\" onChange={e=>{this.setState({category:e.target.value})}}>\n                            <option value=\"\" disabled selected>Choose Category</option>\n                            <option value=\"Peer to Peer\">Peer to Peer</option>\n                            <option value=\"Advance Web Technology\">Advance Web Technology</option>\n                            <option value=\"Internet of Things\">Internet of Things</option>\n                            </Input>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"content\">Content </label>\n                            <input type=\"content\"\n                                className=\"form-control\" style={{height:\"120px\"}}\n                                name=\"content\"\n                                placeholder=\"Extra Explaination...\"\n                                value={this.state.content}\n                                onChange={this.onChange} />\n                        </div>\n                      <div className=\"\">\n                          <label style={{color: '#5c7d92', marginRight:'2%'}}> Select File</label>\n                          <input className=\"mb-2 \"type=\"file\" name=\"file\"\n                          accept=\"image/png, image/jpeg, .zip,.rar,.7zip, .pdf\"\n                          onChange={(e)=>this.handleFile(e)} />\n                          </div>\n                        <p style={{color: '#E67E22'}} >\n                            Supported Formats: JPG-PNG-PDF-Zip\n                        </p>\n                        <button type=\"submit\" className=\"btn btn-md btn-primary btn-block\">\n                            Post\n                        </button>\n                    </form>\n                </div>\n            </div>\n            </div>\n            <div className='container-fluid mt-5'> \n             <Footer />\n             </div>\n            </React.Fragment>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}